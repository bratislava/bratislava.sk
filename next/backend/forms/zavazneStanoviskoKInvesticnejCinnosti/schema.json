{
  "title": "Záväzné stanovisko k investičnej činnosti",
  "type": "object",
  "required": ["ziadatel", "investor", "projektant", "stavba", "konanie", "prilohy"],
  "allOf": [
    {
      "properties": {
        "ziadatel": {
          "type": "object",
          "title": "Žiadateľ",

          "allOf": [
            {
              "properties": {
                "ziatetelTyp": {
                  "title": "Žiadate ako",
                  "type": "string",
                  "enum": ["Fyzická osoba", "Fyzická osoba - podnikateľ", "Právnicka osoba"]
                }
              },
              "required": ["ziatetelTyp"]
            },
            {
              "if": {
                "properties": {
                  "ziatetelTyp": {
                    "const": "Fyzická osoba"
                  }
                }
              },
              "then": {
                "properties": {
                  "ziadatelMenoPriezvisko": {
                    "type": "string",
                    "pattern": "[ ]",
                    "title": "Meno a priezvisko"
                  }
                },
                "required": ["ziadatelMenoPriezvisko"]
              }
            },
            {
              "if": {
                "properties": {
                  "ziatetelTyp": {
                    "oneOf": [{ "const": "Fyzická osoba - podnikateľ" }, { "const": "Právnicka osoba" }]
                  }
                }
              },
              "then": {
                "properties": {
                  "ziadatelObchodneMeno": {
                    "type": "string",
                    "title": "Obchodné meno"
                  }
                },
                "required": ["ziadatelObchodneMeno"]
              }
            },
            {
              "if": {
                "properties": {
                  "ziatetelTyp": {
                    "const": "Právnicka osoba"
                  }
                }
              },
              "then": {
                "properties": {
                  "ziadatelIco": {
                    "type": "number",
                    "title": "IČO"
                  }
                },
                "required": ["ziadatelIco"]
              }
            },
            {
              "if": {
                "properties": {
                  "ziatetelTyp": {
                    "const": "Fyzická osoba"
                  }
                }
              },
              "then": {
                "properties": {
                  "ziadatelAdresaPobytu": {
                    "type": "string",
                    "title": "Adresa trvalého pobytu"
                  }
                },
                "required": ["ziadatelAdresaPobytu"]
              }
            },
            {
              "if": {
                "properties": {
                  "ziatetelTyp": {
                    "const": "Fyzická osoba - podnikateľ"
                  }
                }
              },
              "then": {
                "properties": {
                  "ziadatelMiestoPodnikania": {
                    "type": "string",
                    "title": "Miesto podnikania"
                  }
                },
                "required": ["ziadatelMiestoPodnikania"]
              }
            },
            {
              "if": {
                "properties": {
                  "ziatetelTyp": {
                    "const": "Právnicka osoba"
                  }
                }
              },
              "then": {
                "properties": {
                  "ziadatelAdresaSidla": {
                    "type": "string",
                    "title": "Adresa sídla"
                  }
                },
                "required": ["ziadatelAdresaSidla"]
              }
            },
            {
              "properties": {
                "ziadatelMesto": {
                  "type": "string",
                  "title": "Mesto",
                  "format": "ciselnik"
                },
                "ziadatelPsc": {
                  "type": "string",
                  "title": "PSČ"
                }
              },
              "required": ["ziadatelMesto", "ziadatelPsc"]
            },
            {
              "if": {
                "properties": {
                  "ziatetelTyp": {
                    "const": "Právnicka osoba"
                  }
                }
              },
              "then": {
                "properties": {
                  "ziadatelKontaktnaOsoba": {
                    "type": "string",
                    "title": "Kontaktná osoba"
                  }
                },
                "required": ["ziadatelKontaktnaOsoba"]
              }
            },
            {
              "properties": {
                "ziadatelEmail": {
                  "type": "string",
                  "title": "E-mail",
                  "format": "email"
                },
                "ziadatelTelefon": {
                  "type": "string",
                  "title": "Telefónne číslo (v tvare +421...)",
                  "pattern": "((([+][1-9])|([+][1-9][0-9]{1,8}))|((00[1-9])|(00[1-9][0-9]{1,7})))"
                }
              },
              "required": ["ziadatelEmail", "ziadatelTelefon"]
            }
          ]
        }
      }
    },
    {
      "properties": {
        "investor": {
          "type": "object",
          "title": "Investor",

          "allOf": [
            {
              "properties": {
                "investorZiadatelom": {
                  "title": "Je investor rovnaká osoba ako žiadateľ?",
                  "type": "boolean"
                }
              },
              "required": ["investorZiadatelom"]
            },
            {
              "if": {
                "properties": {
                  "investorZiadatelom": {
                    "const": false
                  }
                }
              },
              "then": {
                "properties": {
                  "splnomocnenie": {
                    "type": "array",
                    "title": "Splnomocnenie na zastupovanie",
                    "items": {
                      "type": "string",
                      "format": "data-url"
                    }
                  }
                },
                "required": ["splnomocnenie"]
              }
            },
            {
              "if": {
                "properties": {
                  "investorZiadatelom": {
                    "const": false
                  }
                }
              },
              "then": {
                "allOf": [
                  {
                    "properties": {
                      "splnomocnenie": {
                        "type": "array",
                        "title": "Splnomocnenie na zastupovanie",
                        "items": {
                          "type": "string",
                          "format": "data-url"
                        }
                      },
                      "investorTyp": {
                        "title": "Typ investora",
                        "type": "string",
                        "enum": ["Fyzická osoba", "Fyzická osoba - podnikateľ", "Právnicka osoba"]
                      }
                    },
                    "required": ["splnomocnenie", "investorTyp"]
                  },
                  {
                    "if": {
                      "properties": {
                        "investorTyp": {
                          "const": "Fyzická osoba"
                        }
                      }
                    },
                    "then": {
                      "properties": {
                        "investorMenoPriezvisko": {
                          "type": "string",
                          "pattern": "[ ]",
                          "title": "Meno a priezvisko"
                        }
                      },
                      "required": ["investorMenoPriezvisko"]
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "investorTyp": {
                          "oneOf": [{ "const": "Fyzická osoba - podnikateľ" }, { "const": "Právnicka osoba" }]
                        }
                      }
                    },
                    "then": {
                      "properties": {
                        "investorObchodneMeno": {
                          "type": "string",
                          "title": "Obchodné meno"
                        }
                      },
                      "required": ["investorObchodneMeno"]
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "investorTyp": {
                          "const": "Právnicka osoba"
                        }
                      }
                    },
                    "then": {
                      "properties": {
                        "investorIco": {
                          "type": "number",
                          "title": "IČO"
                        }
                      },
                      "required": ["investorIco"]
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "investorTyp": {
                          "const": "Fyzická osoba"
                        }
                      }
                    },
                    "then": {
                      "properties": {
                        "investorAdresaPobytu": {
                          "type": "string",
                          "title": "Adresa trvalého pobytu"
                        }
                      },
                      "required": ["investorAdresaPobytu"]
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "investorTyp": {
                          "const": "Fyzická osoba - podnikateľ"
                        }
                      }
                    },
                    "then": {
                      "properties": {
                        "investorMiestoPodnikania": {
                          "type": "string",
                          "title": "Miesto podnikania"
                        }
                      },
                      "required": ["investorMiestoPodnikania"]
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "investorTyp": {
                          "const": "Právnicka osoba"
                        }
                      }
                    },
                    "then": {
                      "properties": {
                        "investorAdresaSidla": {
                          "type": "string",
                          "title": "Adresa sídla"
                        }
                      },
                      "required": ["investorAdresaSidla"]
                    }
                  },
                  {
                    "properties": {
                      "investorMesto": {
                        "type": "string",
                        "title": "Mesto",
                        "format": "ciselnik"
                      },
                      "investorPsc": {
                        "type": "string",
                        "title": "PSČ"
                      }
                    },
                    "required": ["investorMesto", "investorPsc"]
                  },
                  {
                    "if": {
                      "properties": {
                        "investorTyp": {
                          "const": "Právnicka osoba"
                        }
                      }
                    },
                    "then": {
                      "properties": {
                        "investorKontaktnaOsoba": {
                          "type": "string",
                          "title": "Kontaktná osoba"
                        }
                      },
                      "required": ["investorKontaktnaOsoba"]
                    }
                  },
                  {
                    "properties": {
                      "investorEmail": {
                        "type": "string",
                        "title": "E-mail",
                        "format": "email"
                      },
                      "investorTelefon": {
                        "type": "string",
                        "title": "Telefónne číslo (v tvare +421...)",
                        "pattern": "((([+][1-9])|([+][1-9][0-9]{1,8}))|((00[1-9])|(00[1-9][0-9]{1,7})))"
                      }
                    },
                    "required": ["investorEmail", "investorTelefon"]
                  }
                ]
              }
            }
          ]
        }
      }
    },
    {
      "properties": {
        "projektant": {
          "type": "object",
          "title": "Zodpovedný projektant",
          "properties": {
            "projektantMenoPriezvisko": {
              "type": "string",
              "pattern": "[ ]",
              "title": "Meno a priezvisko"
            },
            "projektantEmail": {
              "type": "string",
              "title": "E-mail",
              "format": "email"
            },
            "projektantTelefon": {
              "type": "string",
              "title": "Telefónne číslo (v tvare +421...)",
              "pattern": "((([+][1-9])|([+][1-9][0-9]{1,8}))|((00[1-9])|(00[1-9][0-9]{1,7})))"
            },
            "autorizacneOsvedcenie": {
              "type": "string",
              "title": "Číslo autorizačného osvedčenia",
              "description": "Autorizačné osvedčenie dokazuje, že projektant je oprávnený na výkon svojej činnosti. Nie je potrebné pri vypracovaní dokumentácie k jednoduchým / drobným stavbám, kde postačuje osoba s odborným vzdelaním. "
            },
            "datumSpracovania": {
              "type": "string",
              "title": "Dátum spracovania projektovej dokumentácie",
              "format": "date"
            }
          },
          "required": [
            "projektantMenoPriezvisko",
            "projektantEmail",
            "projektantTelefon",
            "autorizacneOsvedcenie",
            "datumSpracovania"
          ]
        }
      }
    },
    {
      "properties": {
        "stavba": {
          "type": "object",
          "title": "Informácie o stavbe",
          "properties": {
            "stavbaNazov": {
              "type": "string",
              "title": "Názov stavby/projektu"
            },
            "stavbaDruh": {
              "type": "string",
              "title": "Druh stavby",
              "enums": [
                "Bytový dom",
                "Rodinný dom",
                "Iná budova na bývanie",
                "Nebytová budova",
                "Inžinierska stavba",
                "Iné"
              ]
            },
            "stavbaUlica": {
              "type": "string",
              "title": "Ulica"
            },
            "stavbaSupisneCislo": {
              "type": "number",
              "title": "Súpisné číslo"
            },
            "stavbaParcela": {
              "title": "Parcelné číslo",
              "description": "Číslo parcely a bližšie informácie k pozemku a jeho vlastníkom nájdete na katastrálnej mape ZBGIS.",
              "type": "string"
            },
            "stavbaKataster": {
              "title": "Katastrálne územie",
              "description": "Vyberte jedno alebo viacero katastrálnych území, v ktorých sa pozemok nachádza",
              "type": "array",
              "uniqueItems": true,
              "items": {
                "type": "string"
              }
            }
          },
          "required": ["stavbaNazov", "stavbaDruh", "stavbaUlica", "stavbaParcela", "stavbaKataster"]
        }
      }
    },
    {
      "properties": {
        "konanie": {
          "type": "object",
          "title": "Typ konania na stavebnom úrade",

          "allOf": [
            {
              "properties": {
                "konanieTyp": {
                  "title": "Typ konania",
                  "type": "string",
                  "enum": [
                    "Územné konanie",
                    "Územné konanie o zmene dokončenej stavby",
                    "Územné konanie o zmene stavby pred dokončením",
                    "Konanie o dodatočnom povolení stavby",
                    "Konanie o dodatočnom povolení zmeny dokončenej stavby",
                    "Konanie o dodatočnom povolení zmeny stavby pred dokončením"
                  ]
                }
              },
              "required": ["konanieTyp"]
            },
            {
              "if": {
                "properties": {
                  "konanieTyp": {
                    "oneOf": [
                      { "const": "Konanie o dodatočnom povolení stavby" },
                      {
                        "const": "Konanie o dodatočnom povolení zmeny dokončenej stavby"
                      },
                      {
                        "const": "Konanie o dodatočnom povolení zmeny stavby pred dokončením"
                      }
                    ]
                  }
                }
              },
              "then": {
                "properties": {
                  "ziadostOdovodnenie": {
                    "type": "string",
                    "title": "Odôvodnenie žiadosti",
                    "enums": [
                      "Stavba bola zrealizovaná bez stavebného povolenia",
                      "Stavba bola zrealizovaná nad rámec vydaného stavebného povolenia",
                      "Iné"
                    ]
                  }
                },
                "required": ["ziadostOdovodnenie"]
              }
            },
            {
              "if": {
                "properties": {
                  "ziadostOdovodnenie": {
                    "const": "Stavba bola zrealizovaná nad rámec vydaného stavebného povoleni"
                  }
                }
              },
              "then": {
                "properties": {
                  "stavbaFotodokumentacia": {
                    "type": "array",
                    "title": "Fotodokumentácia stavby",
                    "items": {
                      "type": "string",
                      "format": "data-url"
                    }
                  }
                },
                "required": ["stavbaFotodokumentacia"]
              }
            },
            {
              "if": {
                "properties": {
                  "ziadostOdovodnenie": {
                    "const": "Stavba bola zrealizovaná nad rámec vydaného stavebného povoleni"
                  }
                }
              },
              "then": {
                "properties": {
                  "stavbaPisomnosti": {
                    "type": "array",
                    "title": "Relevantné písomnosti súvisiace so stavbou",
                    "items": {
                      "type": "string",
                      "format": "data-url"
                    }
                  }
                },
                "required": ["stavbaPisomnosti"]
              }
            }
          ]
        }
      }
    },
    {
      "properties": {
        "prilohy": {
          "type": "object",
          "title": "Prílohy",
          "properties": {
            "projektovaDokumentacia": {
              "type": "array",
              "title": "Projektová dokumentácia",
              "description": "Jednotlivé časti štúdie môžete nahrať samostatne alebo ako jeden súbor.",
              "items": {
                "type": "string",
                "format": "data-url"
              }
            },
            "vykresy": {
              "type": "array",
              "title": "Iné výkresy situácií",
              "description": "pešie ťahy, plochy zelene a iné",
              "items": {
                "type": "string",
                "format": "data-url"
              }
            },
            "ulicnyPohlad": {
              "type": "array",
              "title": "Uličný pohľad so záberom najbližších stavieb",
              "description": "povinné v zastavanom území",
              "items": {
                "type": "string",
                "format": "data-url"
              }
            },
            "podzemnePodlazie": {
              "type": "array",
              "title": "Vyhodnotenie podzemného podlažia pri bytových budovách",
              "description": "podľa platnej STN 73 4301 - bytové budovy",
              "items": {
                "type": "string",
                "format": "data-url"
              }
            },
            "vyjadrenieUradu": {
              "type": "array",
              "title": "Vyjadrenie Krajského pamiatkového úradu",
              "description": "ak je riešený objekt národnou kultúrnou pamiatkou, resp. ide o novostavbu v pamiatkovej zóne Bratislavy - centrálna mestská oblasť (PZ CMO)",
              "items": {
                "type": "string",
                "format": "data-url"
              }
            }
          },
          "required": ["projektovaDokumentacia"]
        }
      }
    }
  ]
}
