query BlogPostBySlug($slug: String!, $locale: I18NLocaleCode!) {
  blogPosts(filters: { slug: { eq: $slug } }, locale: $locale) {
    ...BlogPost
  }
}

# TODO: still unclear the logic
# query RelatedPostsBySlug($slug: String!, $locale: String!) {
#   relatedPostsBySlug(slug: $slug, locale: $locale) {
#     ...BlogPost
#   }
# }

query Footer($locale: I18NLocaleCode!) {
  footer(locale: $locale) {
    data {
      attributes {
        address
        copyright
        email
        facebookUrl
        instagramUrl
        phone
        youtubeUrl
        accessibilityLink {
          anchor
          title
          url
          page {
            data {
              attributes {
                title
                slug
                locale
              }
            }
          }
        }
        footerSections {
          title
          pageLinks {
            anchor
            title
            url
            page {
              data {
                attributes {
                  title
                  slug
                  locale
                }
              }
            }
          }
        }
      }
    }
  }
}

query MainMenu($locale: I18NLocaleCode!) {
  pageCategories(locale: $locale) {
    data {
      attributes {
        color
        icon
        title
        iconHover
        priority
      }
      id
    }
  }
}

query LatestPostsByTags($tags: [String], $limit: Int, $start: Int) {
  blogPosts(
    filters: { tag: { title: { in: $tags } } }
    pagination: { limit: $limit, start: $start }
    sort: "publishedAt:desc"
  ) {
    ...BlogPost
  }
}

query BlogPostsStaticPaths($locale: I18NLocaleCode) {
  blogPosts(locale: $locale) {
    data {
      id
      attributes {
        slug
      }
    }
  }
}

query LatestBlogsWithTags($sort: [String], $limit: Int, $start: Int, $filters: BlogPostFiltersInput) {
  blogPosts(sort: $sort, pagination: { limit: $limit, start: $start }, filters: $filters) {
    data {
      id
      attributes {
        slug
        title
        excerpt
        coverImage {
          data {
            attributes {
              url
            }
          }
        }
        tag {
          data {
            attributes {
              title
              publishedAt
              pageCategory {
                data {
                  attributes {
                    title
                    color
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

query TotalPostsCount($where: BlogPostFiltersInput) {
  blogPosts(filters: $where) {
    meta {
      pagination {
        total
      }
    }
  }
}

query RelatedTags($where: TagFiltersInput) {
  tags(filters: $where) {
    data {
      attributes {
        title
        pageCategory {
          data {
            attributes {
              title
              color
            }
          }
        }
      }
    }
  }
}

fragment BlogPost on BlogPostEntityResponseCollection {
  data {
    id
    attributes {
      slug
      excerpt
      title
      updatedAt
      date_added
      tag {
        data {
          attributes {
            title
            pageCategory {
              data {
                attributes {
                  title
                  color
                }
                id
              }
            }
          }
          id
        }
      }
      coverImage {
        data {
          attributes {
            url
          }
        }
      }
      moreLink {
        ...BlogPostLink
      }
      createdAt
      sections {
        ...PageSections
      }
    }
  }
}

fragment BlogPostLink on ComponentBlocksBlogPostLink {
  blogPost {
    data {
      id
      attributes {
        title
        slug
      }
    }
  }
  title
  url
}

fragment PageLink on ComponentBlocksPageLink {
  title
  url
  anchor
  page {
    data {
      attributes {
        title
        slug
        locale
      }
    }
  }
}

# query MyQuery {
#   blogPosts(filters: {tag: {title: {in: "Covid"}}}, pagination: {limit: 10, start: 10}, sort: "publishedAt:desc") {
#     data {
#       attributes {
#         slug
#         excerpt
#         title
#         date_added
#         updatedAt
#         tag {
#           data {
#             attributes {
#               title
#               pageCategory {
#                 data {
#                   attributes {
#                     title
#                     color
#                   }
#                   id
#                 }
#               }
#             }
#           }
#         }
#         coverImage {
#           data {
#             attributes {
#               url
#             }
#           }
#         }
#         moreLink {
#           blogPost {
#             data {
#               id
#               attributes {
#                 title
#                 slug
#               }
#             }
#           }
#           title
#           url
#         }
#         createdAt
#         sections {
#           __typename
#           ... on ComponentSectionsIconTitleDesc {
#           	title
#             list {
#               title
#   						desc
#   						icon {
#     						data {
#       						attributes {
#         						url
#       						}
#       						id
#     						}
#   						}
#             }
#           }
#         }
#       }
#     }
#   }
# }
