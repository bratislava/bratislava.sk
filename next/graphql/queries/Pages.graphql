query PagesStaticPaths {
  pages(pagination: { limit: -1 }) {
    data {
      id
      attributes {
        slug
      }
    }
  }
}

query PageBySlug($slug: String!, $locale: I18NLocaleCode!) {
  pages(filters: { slug: { eq: $slug } }, locale: $locale) {
    ...GeneralPage
  }
}

fragment GeneralPage on PageEntityResponseCollection {
  data {
    attributes {
      slug
      title
      subtext
      pageColor
      metaDiscription
      pageBackgroundImage {
        data {
          attributes {
            url
          }
        }
      }
      headerLinks {
        ...CommonLink
      }
      # TODO: Remove legacy
      pageButtonContent {
        title
        url
      }
      sections {
        ...Sections
      }
      locale
      localizations {
        ...Localization
      }
      pageHeaderSections {
        __typename
        ... on ComponentSectionsSubpageList {
          id
          subpageList(pagination: { limit: 50 }) {
            ...PageLinkBlock
          }
        }
        ... on ComponentSectionsFeaturedBlogPosts {
          id
          first_blog {
            ...BlogSection
          }
          second_blog {
            ...BlogSection
          }
          third_blog {
            ...BlogSection
          }
        }
      }
      parentPage {
        data {
          attributes {
            ...ParentPage
            parentPage {
              data {
                attributes {
                  ...ParentPage
                  parentPage {
                    data {
                      attributes {
                        ...ParentPage
                        parentPage {
                          data {
                            attributes {
                              ...ParentPage
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      pageCategory {
        data {
          id
          attributes {
            title
            color
          }
        }
      }
    }
    id
  }
}

fragment BlogSection on BlogPostEntityResponse {
  data {
    attributes {
      title
      publishedAt
      coverImage {
        data {
          attributes {
            url
          }
        }
      }
      tag {
        data {
          attributes {
            pageCategory {
              data {
                attributes {
                  color
                  shortTitle
                }
              }
            }
          }
        }
      }
      slug
    }
  }
}

fragment ParentPage on Page {
  slug
  locale
  title
}

fragment Localization on PageRelationResponseCollection {
  data {
    attributes {
      slug
      locale
    }
  }
}
