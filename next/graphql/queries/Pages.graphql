query Pages {
  pages {
    data {
      id
      attributes {
        slug
        sections {
          ...PageSections
        }
      }
    }
  }
}

query PagesStaticPaths {
  pages {
    data {
      id
      attributes {
        slug
      }
    }
  }
}

query PageBySlug($slug: String!, $locale: I18NLocaleCode!) {
  pages(filters: { slug: { eq: $slug } }, locale: $locale) {
    ...GeneralPage
  }

  # footer(locale: $locale) {
  #   ...Footer
  # }

  # mainMenu: pageCategories(locale: $locale) {
  #   ...MainMenuItem
  # }
}

fragment GeneralPage on PageEntityResponseCollection {
  data {
    attributes {
      slug
      title
      pageColor
      metaDiscription
      pageBackgroundImage {
        data {
          attributes {
            url
          }
        }
      }
      locale
      pageHeaderSections {
        ... on ComponentSectionsSubpageList {
          id
          subpageList {
            id
            anchor
            title
            url
            page {
              data {
                attributes {
                  title
                  slug
                  locale
                }
              }
            }
          }
        }
        ... on ComponentSectionsFeaturedBlogPosts {
          id
          first_blog {
            data {
              attributes {
                title
                publishedAt
                coverImage {
                  data {
                    attributes {
                      url
                    }
                  }
                }
                tag {
                  data {
                    attributes {
                      pageCategory {
                        data {
                          attributes {
                            color
                            shortTitle
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      parentPage {
        data {
          attributes {
            ...ParentPage
            parentPage {
              data {
                attributes {
                  ...ParentPage
                  parentPage {
                    data {
                      attributes {
                        ...ParentPage
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
    id
  }
}

fragment ParentPage on Page {
  slug
  locale
  title
}

# fragment Footer on Footer {
#   address
#   phone
#   email
#   copyright
#   accessibilityLink {
#     ...PageLink
#   }
#   youtubeUrl
#   facebookUrl
#   instagramUrl
#   footerSections {
#     title
#     pageLinks {
#       ...PageLink
#     }
#   }
# }

fragment PageLink on ComponentBlocksPageLink {
  title
  url
  anchor
  page {
    data {
      attributes {
        title
        slug
        locale
      }
    }
  }
}

# fragment DocumentList on ComponentSectionsDocumentList {
#   vzns {
#     id
#     category
#     details
#     amedmentDocument {
#       id
#       title
#       validFrom
#       document {
#         url
#         size
#         ext
#         createdAt
#       }
#     }
#     cancellationDocument {
#       id
#       title
#       validFrom
#       document {
#         url
#         size
#         ext
#         createdAt
#       }
#     }
#     title
#     validFrom
#     mainDocument {
#       url
#       size
#       ext
#       createdAt
#     }
#     consolidatedText {
#       id
#       url
#       size
#       ext
#       createdAt
#     }
#   }
# }

fragment PageSections on PageSectionsDynamicZone {
  __typename

  ... on ComponentSectionsIconTitleDesc {
    title
    list {
      ...IconTitleDesc
    }
  }

  # ... on ComponentSectionsDocumentList {
  #   ...DocumentList
  # }

  ... on ComponentSectionsDivider {
    hasBackground
    style
  }

  ... on ComponentSectionsTextWithImage {
    hasBackground
    content
    imagePosition
    imageShadow
    imageSrc {
      data {
        attributes {
          url
        }
      }
    }
  }

  ... on ComponentSectionsFileList {
    hasBackground
    fileList {
      ...File
    }
  }

  ... on ComponentSectionsColumnedText {
    hasBackground
    content
  }

  ... on ComponentSectionsNarrowText {
    hasBackground
    content
    width
    align
  }

  ... on ComponentSectionsWaves {
    position
    isRich
  }

  ... on ComponentSectionsLinks {
    title
    hasBackground
    pageLinks {
      ...PageLink
    }
  }
  ... on ComponentSectionsContact {
    title
    hasBackground
    description
    phone
    phoneLabel
    email
    emailLabel
    address
  }

  ... on ComponentSectionsAccordion {
    title
    hasBackground
    institutions {
      ...Institution
    }
    flatText {
      ...FlatText
    }
    institutionsNarrow {
      ...institutionsNarrow
    }
  }

  ... on ComponentSectionsCalculator {
    hasBackground
    single_adult_value
    another_adult_value
    child_value
  }

  ... on ComponentSectionsListItems {
    title
    hasBackground
    listItems {
      content
      moreLinkTitle
      moreLinkUrl
      moreLinkPage {
        data {
          attributes {
            locale
            slug
            title
          }
        }
      }
      circleOption
    }
  }

  ... on ComponentSectionsVideos {
    id
    title
    subtitle
    videos {
      id
      title
      speaker
      url
    }
  }

  ... on ComponentSectionsNumericalList {
    id
    items {
      ...NumericalListItem
    }
    title
    variant
    buttonText
    buttonLink
    hasBackground
  }

  ... on ComponentSectionsArticlesList {
    title
    category {
      data {
        attributes {
          title
        }
      }
    }
    filtering
  }
}

fragment institutionsNarrow on ComponentAccordionItemsInstitutionNarrow {
  title
  subtitle
  category
  url
  urlLabel
}

fragment FlatText on ComponentAccordionItemsFlatText {
  category
  content
  width
  align
  moreLinkTitle
  moreLinkUrl
  moreLinkPage {
    data {
      attributes {
        slug
        title
        locale
      }
    }
  }
}

fragment Institution on ComponentAccordionItemsInstitution {
  title
  subtitle
  category
  firstColumn
  secondColumn
  thirdColumn
  url
  urlLabel
}

fragment IconTitleDesc on ComponentBlocksIconWithTitleAndDescription {
  title
  desc
  icon {
    data {
      attributes {
        url
      }
      id
    }
  }
}

fragment File on ComponentBlocksFile {
  title
  category
  media {
    data {
      attributes {
        url
        createdAt
        size
        ext
      }
    }
  }
}

fragment NumericalListItem on ComponentBlocksNumericalListItem {
  text
}

fragment Localization on Page {
  slug
  locale
}

# fragment MainMenuItem on PageCategory {
#   data {
#     id
#     attributes {
#       title
#       color
#       icon
#       iconHover
#       priority
#     }
#   }
#   subcategories {
#     id
#     title
#     priority
#     icon
#     moreLink {
#       ...PageLink
#     }
#     pages {
#       ...PageLink
#     }
#   }
# }
